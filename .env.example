# ============================================================================
# SEO Intelligence Platform - Environment Configuration
# ============================================================================
# Copy this file to .env and configure with your actual values
# DO NOT commit .env to version control

# ============================================================================
# DATABASE CONFIGURATION
# ============================================================================

# PostgreSQL connection string
# Format: postgresql://username:password@host:port/database
WAREHOUSE_DSN=postgresql://seo_admin:your_secure_password@localhost:5432/seo_warehouse

# Docker-based setup (use this format if running in Docker)
# WAREHOUSE_DSN=postgresql://${POSTGRES_USER}:${POSTGRES_PASSWORD}@warehouse:5432/${POSTGRES_DB}

# Legacy variables (for Docker Compose)
POSTGRES_DB=seo_warehouse
POSTGRES_USER=seo_admin
POSTGRES_PASSWORD=change_me_in_production
POSTGRES_PORT=5432

# Connection pool settings (optional)
DB_POOL_MIN_SIZE=10
DB_POOL_MAX_SIZE=20

# ============================================================================
# CELERY CONFIGURATION
# ============================================================================

# Redis broker for task queue
CELERY_BROKER_URL=redis://localhost:6379/0

# Redis backend for task results
CELERY_RESULT_BACKEND=redis://localhost:6379/1

# Worker settings
CELERY_WORKER_CONCURRENCY=4
CELERY_TASK_TIME_LIMIT=3600
CELERY_TASK_SOFT_TIME_LIMIT=3000

# ============================================================================
# GOOGLE SEARCH CONSOLE (GSC)
# ============================================================================

# Your verified property URL(s) - comma-separated for multiple
GSC_PROPERTIES=https://yourdomain.com,https://blog.yourdomain.com

# Alternative domain property format
# GSC_PROPERTIES=sc-domain:yourdomain.com

# Path to service account JSON credentials
# Get credentials from: https://console.cloud.google.com/apis/credentials
GSC_SERVICE_ACCOUNT_FILE=/secrets/gsc_sa.json
GSC_CREDENTIALS_PATH=/path/to/credentials/gsc_service_account.json

# Collection settings
GSC_DAYS_BACK=30
GSC_MAX_ROWS=25000
BACKFILL_DAYS=60

# ============================================================================
# GOOGLE ANALYTICS 4 (GA4)
# ============================================================================

# Your GA4 property ID (numeric)
GA4_PROPERTY_ID=123456789

# Path to service account JSON credentials
GA4_CREDENTIALS_FILE=/secrets/ga4_sa.json
GA4_CREDENTIALS_PATH=/path/to/credentials/ga4_service_account.json

# Collection settings
GA4_DAYS_BACK=30
GA4_LIMIT=100000

# ============================================================================
# SERP TRACKING
# ============================================================================

# API Provider: 'valueserp' or 'serpapi'
SERP_API_PROVIDER=valueserp

# ValueSERP API Key (free tier: 100 searches/month)
# Get key from: https://www.valueserp.com/
VALUESERP_API_KEY=your_valueserp_api_key

# Alternative: SerpAPI Key (free tier: 100 searches/month)
# Get key from: https://serpapi.com/
# SERPAPI_KEY=your_serpapi_key

# SERP tracking settings
SERP_LOCATION=United States
SERP_DEVICE=desktop
SERP_MAX_RESULTS=100

# ============================================================================
# CORE WEB VITALS MONITORING
# ============================================================================

# Google PageSpeed Insights API Key (optional, increases quota)
# Get key from: https://console.cloud.google.com/apis/credentials
PAGESPEED_API_KEY=

# Monitoring settings
CWV_CHECK_MOBILE=true
CWV_CHECK_DESKTOP=true

# ============================================================================
# NOTIFICATIONS - SLACK
# ============================================================================

# Slack incoming webhook URL
# Get from: https://api.slack.com/messaging/webhooks
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/T00000000/B00000000/XXXXXXXXXXXXXXXXXXXX

# Slack channel settings
SLACK_DEFAULT_CHANNEL=#seo-alerts
SLACK_USERNAME=SEO Intelligence Bot
SLACK_ICON_EMOJI=:chart_with_upwards_trend:

# ============================================================================
# NOTIFICATIONS - EMAIL (SMTP)
# ============================================================================

# SMTP server settings
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USE_TLS=true

# SMTP credentials
SMTP_USER=your-email@gmail.com
SMTP_PASS=your-app-specific-password

# Email settings
EMAIL_FROM=seo-alerts@yourdomain.com
EMAIL_FROM_NAME=SEO Intelligence Platform
EMAIL_TO=team@yourdomain.com

# ============================================================================
# NOTIFICATIONS - EMAIL (SENDGRID)
# ============================================================================

# Alternative: SendGrid API (instead of SMTP)
# Get key from: https://app.sendgrid.com/settings/api_keys
# SENDGRID_API_KEY=SG.your_api_key
# SENDGRID_FROM_EMAIL=seo-alerts@yourdomain.com
# SENDGRID_FROM_NAME=SEO Intelligence Platform

# ============================================================================
# NOTIFICATIONS - WEBHOOKS
# ============================================================================

# Generic webhook URL
WEBHOOK_URL=

# PagerDuty integration
# PAGERDUTY_INTEGRATION_KEY=your_integration_key

# Discord webhook
# DISCORD_WEBHOOK_URL=https://discord.com/api/webhooks/...

# Microsoft Teams webhook
# TEAMS_WEBHOOK_URL=https://outlook.office.com/webhook/...

# ============================================================================
# GITHUB AUTOMATION
# ============================================================================

# Personal access token for creating PRs
# Get from: https://github.com/settings/tokens
# Required scopes: repo, workflow
GITHUB_TOKEN=ghp_your_personal_access_token

# Repository settings
GITHUB_REPO=yourusername/your-website-repo
GITHUB_DEFAULT_BRANCH=main

# PR settings
GITHUB_AUTO_ASSIGN=yourusername
GITHUB_LABEL=seo-optimization

# ============================================================================
# OLLAMA (LOCAL LLM)
# ============================================================================

# Ollama API base URL
OLLAMA_BASE_URL=http://localhost:11434

# Model to use for AI agents
# Options: llama2, mistral, codellama, phi, etc.
OLLAMA_MODEL=llama2

# Model parameters
OLLAMA_TEMPERATURE=0.7
OLLAMA_MAX_TOKENS=2000

# ============================================================================
# LANGCHAIN / LANGGRAPH
# ============================================================================

# LangChain settings
LANGCHAIN_TRACING_V2=false
LANGCHAIN_API_KEY=

# Agent settings
AGENT_MAX_ITERATIONS=10
AGENT_TIMEOUT=300

# ============================================================================
# ANOMALY DETECTION
# ============================================================================

# Detection sensitivity (1.0 = normal, 2.0 = strict, 0.5 = lenient)
ANOMALY_SENSITIVITY=1.0

# Z-score threshold for statistical detection
ANOMALY_ZSCORE_THRESHOLD=2.5

# Isolation Forest contamination rate
ANOMALY_CONTAMINATION=0.1

# Minimum data points required for detection
ANOMALY_MIN_DATAPOINTS=14

# ============================================================================
# INSIGHTS CONFIGURATION
# ============================================================================

# Risk detection thresholds
RISK_THRESHOLD_CLICKS_PCT=-20
RISK_THRESHOLD_CONVERSIONS_PCT=-20

# Opportunity detection thresholds
OPPORTUNITY_THRESHOLD_IMPRESSIONS_PCT=50

# ============================================================================
# FORECASTING
# ============================================================================

# Prophet forecast settings
FORECAST_DAYS_AHEAD=30
FORECAST_SEASONALITY_MODE=multiplicative
FORECAST_CHANGEPOINT_PRIOR_SCALE=0.05

# Forecast confidence intervals
FORECAST_INTERVAL_WIDTH=0.95

# ============================================================================
# CONTENT ANALYSIS
# ============================================================================

# Playwright browser settings
PLAYWRIGHT_HEADLESS=true
PLAYWRIGHT_TIMEOUT=30000

# Content scraping
CONTENT_USER_AGENT=Mozilla/5.0 (compatible; SEO-Intelligence-Bot/1.0)

# Readability settings
READABILITY_MIN_SCORE=60

# ============================================================================
# EMBEDDINGS & VECTOR SEARCH
# ============================================================================

# Embedding model (sentence-transformers)
EMBEDDING_MODEL=all-MiniLM-L6-v2

# Vector similarity threshold
VECTOR_SIMILARITY_THRESHOLD=0.7

# ============================================================================
# GRAFANA
# ============================================================================

# Grafana admin credentials
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin_change_me
GRAFANA_PORT=3000

# Grafana URL
GRAFANA_URL=http://localhost:3000

# Plugins (comma-separated list, optional)
# Note: PostgreSQL datasource is built-in to Grafana and doesn't need to be installed
GRAFANA_PLUGINS=

# ============================================================================
# API PORTS
# ============================================================================

API_PORT=8000
MCP_PORT=8001
METRICS_PORT=8002
PROMETHEUS_PORT=9090

# ============================================================================
# LOGGING
# ============================================================================

# Log level: DEBUG, INFO, WARNING, ERROR, CRITICAL
LOG_LEVEL=INFO

# Log format: json or text
LOG_FORMAT=text

# Log file path (optional, leave empty for stdout only)
LOG_FILE=/var/log/seo-platform/app.log

# ============================================================================
# APPLICATION SETTINGS
# ============================================================================

# Environment: development, staging, production
ENVIRONMENT=production

# Application timezone
TIMEZONE=America/New_York

# Feature flags
ENABLE_AUTO_PR=false
ENABLE_CONTENT_SCRAPING=true
ENABLE_EMBEDDINGS=true

# ============================================================================
# PERFORMANCE & OPTIMIZATION
# ============================================================================

# Cache TTL (seconds)
CACHE_TTL=3600

# Rate limiting
RATE_LIMIT_PER_MINUTE=60

# Batch processing
BATCH_SIZE=100

# ============================================================================
# BACKUP SETTINGS
# ============================================================================

# Backup directory
BACKUP_DIR=/backups/seo-platform

# Retention days
BACKUP_RETENTION_DAYS=30

# Backup schedule (cron format)
BACKUP_SCHEDULE=0 2 * * *

# ============================================================================
# SECURITY
# ============================================================================

# Secret key for encryption (generate with: openssl rand -hex 32)
SECRET_KEY=your_secret_key_here

# API key for platform API (if exposed)
API_KEY=your_api_key_here

# Allowed hosts/origins
ALLOWED_HOSTS=localhost,127.0.0.1,yourdomain.com

# ============================================================================
# MONITORING & OBSERVABILITY
# ============================================================================

# Sentry DSN (error tracking, optional)
SENTRY_DSN=

# Prometheus metrics port
METRICS_EXPORT_PORT=9090

# Health check endpoint port
HEALTHCHECK_PORT=8080

# ============================================================================
# HUGO CONTENT INTEGRATION
# ============================================================================

# Path to Hugo content directory
# This is where your Hugo site's content folder is located
HUGO_CONTENT_PATH=/path/to/hugo/content

# Subdomains that use file-based localization (comma-separated)
# File-based: index.md, index.es.md, index.fr.md
# Folder-based (all others): /en/page.md, /es/page.md
HUGO_FILE_LOCALIZATION_SUBDOMAINS=blog.yourdomain.com,news.yourdomain.com

# Default locale for content files
HUGO_DEFAULT_LOCALE=en

# ============================================
# GSC Warehouse - Secure Configuration Template
# ============================================
# This file demonstrates secure configuration
#
# FOR DEVELOPMENT (localhost):
#   - Use this file as .env
#   - Plain text passwords OK for local dev
#   - Set SECURITY_MODE=development
#
# FOR PRODUCTION:
#   - Use Docker secrets (run: bash security/setup_secrets.sh)
#   - Use: docker-compose -f docker-compose.secrets.yml
#   - Set SECURITY_MODE=production
#   - Secrets mounted at /run/secrets/

# ==========================================
# SECURITY MODE
# ==========================================
# Options: development | production
# - development: Relaxed security, passwords in .env OK
# - production: Strict security, use Docker secrets
SECURITY_MODE=development

# ==========================================
# DATABASE CONFIGURATION
# ==========================================
POSTGRES_DB=gsc_db
POSTGRES_USER=gsc_user
POSTGRES_PORT=5432

# For development: plain text password OK
POSTGRES_PASSWORD=your_dev_password_here

# For production: use Docker secret instead
# POSTGRES_PASSWORD_FILE=/run/secrets/db_password

# ==========================================
# GSC API CONFIGURATION
# ==========================================
GSC_PROPERTIES=sc-domain:docs.aspose.net,sc-domain:reference.aspose.net

# Service account file path
GSC_SERVICE_ACCOUNT=./secrets/gsc_sa.json

# ==========================================
# GA4 CONFIGURATION
# ==========================================
GA4_PROPERTY_ID=123456789
GA4_SERVICE_ACCOUNT=./secrets/ga4_sa.json

# ==========================================
# INSIGHTS CONFIGURATION
# ==========================================
RISK_THRESHOLD_CLICKS_PCT=-20
RISK_THRESHOLD_CONVERSIONS_PCT=-20
OPPORTUNITY_THRESHOLD_IMPRESSIONS_PCT=50

# ==========================================
# DISPATCHER CONFIGURATION
# ==========================================
DISPATCHER_ENABLED=true
DISPATCHER_DRY_RUN=false
DISPATCHER_MAX_RETRIES=3

# ==========================================
# SLACK CONFIGURATION
# ==========================================
SLACK_ENABLED=true
SLACK_CHANNEL=#seo-alerts
SLACK_USERNAME=GSC Insights Bot
SLACK_ICON_EMOJI=:mag:

# For development: plain text OK
SLACK_WEBHOOK_URL=https://hooks.slack.com/services/YOUR/WEBHOOK/URL

# For production: use Docker secret
# SLACK_WEBHOOK_FILE=/run/secrets/slack_webhook_url

# ==========================================
# JIRA CONFIGURATION
# ==========================================
JIRA_ENABLED=true
JIRA_BASE_URL=https://your-company.atlassian.net
JIRA_USERNAME=your-email@company.com
JIRA_PROJECT_KEY=SEO
JIRA_ISSUE_TYPE=Bug

# For development: plain text OK
JIRA_API_TOKEN=your_jira_token_here

# For production: use Docker secret
# JIRA_API_TOKEN_FILE=/run/secrets/jira_api_token

# ==========================================
# EMAIL CONFIGURATION
# ==========================================
EMAIL_ENABLED=true
SMTP_HOST=smtp.gmail.com
SMTP_PORT=587
SMTP_USER=your-email@gmail.com
SMTP_USE_TLS=true
EMAIL_FROM=gsc-insights@your-company.com
EMAIL_TO_ADDRESSES=team@company.com,manager@company.com

# For development: plain text OK
SMTP_PASSWORD=your_smtp_password_here

# For production: use Docker secret
# SMTP_PASSWORD_FILE=/run/secrets/smtp_password

# ==========================================
# WEBHOOK CONFIGURATION
# ==========================================
WEBHOOK_ENABLED=false
WEBHOOK_METHOD=POST
WEBHOOK_URL=https://your-webhook-endpoint.com/insights

# ==========================================
# API PORTS
# ==========================================
API_PORT=8000
MCP_PORT=8001
METRICS_PORT=8002
PROMETHEUS_PORT=9090
GRAFANA_PORT=3000

# ==========================================
# MONITORING CONFIGURATION
# ==========================================
GRAFANA_USER=admin
GRAFANA_PASSWORD=admin  # Change for production!

# ==========================================
# STARTUP CONFIGURATION
# ==========================================
BACKFILL_DAYS=60

# ==========================================
# DEPLOYMENT NOTES
# ==========================================
# 
# DEVELOPMENT MODE (current):
#   ✓ Use this .env file directly
#   ✓ Plain text passwords acceptable
#   ✓ No Docker secrets needed
#   ✓ Run: docker-compose up -d
#   ✓ Security features are optional/relaxed
# 
# PRODUCTION MODE:
#   1. Run: bash security/setup_secrets.sh
#   2. Set SECURITY_MODE=production
#   3. Use: docker-compose -f docker-compose.secrets.yml up -d
#   4. All secrets in /run/secrets/ (encrypted)
#   5. Security features enforced
# 
# To test security:
#   python security/audit.py
# 
# To rotate secrets (production only):
#   bash security/rotate_secrets.sh [secret_name]
#

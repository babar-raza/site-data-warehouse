# Actions Command Center Dashboard

## Overview

The Actions Command Center is a comprehensive Grafana dashboard for tracking and managing SEO action items generated by the Insights Engine. It provides real-time visibility into action creation, completion rates, priorities, and overall progress.

## Access

**Dashboard URL**: `http://localhost:3000/d/actions-center/actions-command-center`

**Auto-refresh**: Every 5 minutes

## Features

### 1. Summary Statistics (Top Row)
Four key metrics provide an at-a-glance view:
- **Total Actions**: All actions across all statuses
- **Pending Actions**: Actions waiting to be addressed (color-coded by severity)
- **Completed This Week**: Recent completion activity
- **Avg Completion Time**: Average days from creation to completion

### 2. Status & Priority Distribution

**Actions by Status** (Pie Chart)
- Visual breakdown of actions: pending, in_progress, completed, cancelled
- Color-coded for quick identification:
  - Orange: Pending
  - Blue: In Progress
  - Green: Completed
  - Red: Cancelled

**Actions by Priority** (Bar Chart)
- Horizontal bar chart showing action count by priority level
- Priority order: Critical → High → Medium → Low
- Color-coded:
  - Red: Critical
  - Orange: High
  - Yellow: Medium
  - Blue: Low

**Actions by Type** (Bar Chart)
- Top 10 action types by volume
- Identifies most common action categories
- Helps understand workload distribution

### 3. Timeline Analysis

**Actions Over Time** (Time Series)
- Last 30 days of activity
- Two series:
  - Blue line: Actions created
  - Green line: Actions completed
- Helps identify creation vs. completion trends

**Weekly Completion Rate** (Time Series)
- Last 90 days of weekly completion percentage
- Target thresholds:
  - Green: 85%+ completion rate
  - Yellow: 70-85%
  - Red: Below 50%
- Shows average and latest values

### 4. Action Tables

**Pending Actions (Top Priority)**
- Top 20 pending actions sorted by priority
- Columns: Title, Type, Priority, Effort, Created Date
- Priority and Effort are color-coded for visual scanning
- Helps prioritize daily work

**Recently Completed Actions**
- Last 10 completed actions
- Shows completion date and days to complete
- Days to complete is color-coded:
  - Green: ≤7 days
  - Yellow: 7-14 days
  - Red: >14 days

**Action Types Summary**
- Comprehensive breakdown by action type
- Includes: Total count, Pending, Completed, Avg completion time
- Sorted by total count (descending)

### 5. Effort Distribution

**Pending Actions by Effort** (Donut Chart)
- Shows effort level distribution for pending actions
- Color-coded:
  - Green: Low effort
  - Yellow: Medium effort
  - Red: High effort
- Helps with resource planning

## Property Filter

The dashboard includes a property filter dropdown at the top:
- Dynamically populated from available properties in the database
- Filters all panels simultaneously
- Essential for multi-site deployments

## Database Views

The dashboard is powered by optimized PostgreSQL views:

### Core Views
1. `gsc.vw_actions_by_status` - Status distribution with percentages
2. `gsc.vw_actions_by_priority` - Priority breakdown with status counts
3. `gsc.vw_actions_timeline` - Daily activity timeline
4. `gsc.vw_actions_completion_rate` - Weekly completion metrics
5. `gsc.vw_actions_by_type` - Action type analysis
6. `gsc.vw_pending_actions_summary` - Pending actions summary
7. `gsc.vw_actions_by_effort` - Effort level distribution
8. `gsc.vw_actions_impact_summary` - Estimated impact analysis
9. `gsc.vw_actions_recent_activity` - Recent activity feed

### Performance Indexes
The following indexes ensure fast dashboard performance:
- `idx_actions_property_status` - Property + Status queries
- `idx_actions_property_created` - Property + Created date
- `idx_actions_property_completed` - Property + Completed date
- `idx_actions_priority` - Priority filtering
- `idx_actions_effort` - Effort filtering
- `idx_actions_action_type` - Action type filtering
- `idx_actions_property_status_priority` - Composite for common patterns
- `idx_actions_property_type_status` - Composite for type analysis

## Setup Instructions

### 1. Create Database Views
```bash
# Run the SQL script to create views and indexes
psql -U postgres -d your_database -f sql/28_actions_metrics_views.sql
```

### 2. Verify Dashboard Provisioning
The dashboard JSON is automatically provisioned from:
```
grafana/provisioning/dashboards/actions-command-center.json
```

Ensure your Grafana configuration includes:
```yaml
- name: 'default'
  type: file
  options:
    path: /etc/grafana/provisioning/dashboards
```

### 3. Configure Data Source
The dashboard expects a PostgreSQL data source named `postgres`:
- Host: Your PostgreSQL server
- Database: Your database name
- User: Read access to `gsc.actions` table and views

### 4. Restart Grafana
```bash
# Docker
docker-compose restart grafana

# Linux
sudo systemctl restart grafana-server
```

## Usage Tips

### For SEO Managers
1. **Daily Priority Check**: Review "Pending Actions (Top Priority)" table each morning
2. **Week-over-Week**: Monitor "Weekly Completion Rate" to track team velocity
3. **Effort Planning**: Use "Pending Actions by Effort" to plan sprints

### For Team Leads
1. **Bottleneck Identification**: Check if "Actions Over Time" shows creation outpacing completion
2. **Action Type Analysis**: Use "Action Types Summary" to identify common tasks for automation
3. **Completion Time**: Monitor average completion time trends

### For Executives
1. **KPI Snapshot**: Top row statistics provide executive summary
2. **Progress Tracking**: "Weekly Completion Rate" shows team effectiveness
3. **Status Overview**: Pie charts give instant health check

## Troubleshooting

### Dashboard Shows No Data
1. Verify the `gsc.actions` table has data:
   ```sql
   SELECT COUNT(*) FROM gsc.actions;
   ```
2. Check property filter is selected (dropdown at top)
3. Verify PostgreSQL data source connection in Grafana

### Slow Performance
1. Ensure all indexes are created (run `28_actions_metrics_views.sql`)
2. Check table size: Large tables may need query optimization
3. Consider adjusting time ranges (default: 30 days)

### Views Not Found
1. Verify views exist:
   ```sql
   SELECT viewname FROM pg_views WHERE schemaname = 'gsc' AND viewname LIKE 'vw_actions%';
   ```
2. Re-run view creation script if missing
3. Check database user permissions

### Property Filter Empty
1. Verify actions have property values:
   ```sql
   SELECT DISTINCT property FROM gsc.actions WHERE property IS NOT NULL;
   ```
2. Check PostgreSQL data source query permissions
3. Refresh browser cache

## Customization

### Adjusting Time Ranges
Edit the dashboard JSON or use Grafana's time picker:
- Default: Last 30 days
- Options: 7d, 30d, 90d, 6M, 1Y

### Adding Custom Panels
1. Edit dashboard in Grafana UI
2. Add panel with PostgreSQL query
3. Save and export JSON
4. Update `actions-command-center.json`

### Modifying Thresholds
Edit the dashboard JSON `thresholds` sections:
```json
"thresholds": {
  "mode": "absolute",
  "steps": [
    {"color": "green", "value": null},
    {"color": "yellow", "value": 10},
    {"color": "red", "value": 50}
  ]
}
```

## Integration with Other Dashboards

The Actions Command Center integrates with:
- **Insight Engine Dashboard**: Links insights to actions
- **GA4 Overview**: Traffic impact tracking
- **GSC Overview**: Ranking impact tracking

## API Access

Query actions data programmatically:
```python
import psycopg2

conn = psycopg2.connect("dbname=yourdb user=youruser")
cur = conn.cursor()

# Get pending actions
cur.execute("""
    SELECT * FROM gsc.vw_pending_actions_summary
    WHERE property = 'example.com'
""")
results = cur.fetchall()
```

## Alerts (Future)

Planned alert integrations:
- High pending action count
- Completion rate below threshold
- Critical actions aging beyond SLA

## Support

For issues or questions:
1. Check logs: `docker-compose logs grafana`
2. Verify database connectivity
3. Review Grafana dashboard settings
4. Consult main documentation: `docs/INDEX.md`

## Version History

- **v1.0** (2025-11-26): Initial release with 13 panels and 9 database views
